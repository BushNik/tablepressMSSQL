jQuery(document).ready(function(c){$id=function(a){return c(document.getElementById(a))};window.tp={made_changes:!1,table:{id:$id("table-id").val(),new_id:$id("table-new-id").val(),rows:$id("number-rows").val(),columns:$id("number-columns").val(),head:$id("option-table-head").prop("checked"),foot:$id("option-table-foot").prop("checked"),no_data_columns_pre:2,no_data_columns_post:1,body_cells_pre:'<tr><td><span class="move-handle"></span></td><td><input type="checkbox" /><input type="hidden" class="visibility" name="table[visibility][rows][]" value="1" /></td>',
body_cells_post:'<td><span class="move-handle"></span></td></tr>',body_cell:'<td><textarea rows="1"></textarea></td>',head_cell:'<th class="head"><span class="sort-control sort-desc" title="'+tablepress_strings.sort_desc+'"><span class="sorting-indicator"></span></span><span class="sort-control sort-asc" title="'+tablepress_strings.sort_asc+'"><span class="sorting-indicator"></span></span><span class="move-handle"></span></th>',foot_cell:'<th><input type="checkbox" /><input type="hidden" class="visibility" name="table[visibility][columns][]" value="1" /></th>',
set_table_changed:function(){tp.made_changes=!0},unset_table_changed:function(){tp.made_changes=!1;$id("edit-form-body").one("change","textarea",tp.table.set_table_changed);c("#tablepress_edit-table-information, #tablepress_edit-table-options, #tablepress_edit-datatables-features").one("change","input, textarea, select",tp.table.set_table_changed)},change_id:function(){""===c.trim($id("table-new-id").val())?(alert(tablepress_strings.table_id_not_empty),$id("table-new-id").val(tp.table.new_id).focus().select()):
"0"===c.trim($id("table-new-id").val())?(alert(tablepress_strings.table_id_not_zero),$id("table-new-id").val(tp.table.new_id).focus().select()):this.value!=tp.table.new_id&&(confirm(tablepress_strings.ays_change_table_id)?(tp.table.new_id=this.value,c(".table-shortcode").val("["+tablepress_options.shortcode+" id="+tp.table.new_id+" /]").click(),tp.table.set_table_changed()):c(this).val(tp.table.new_id))},change_table_head:function(){tp.table.head=c(this).prop("checked");$id("option-use-datatables").prop("disabled",
!tp.table.head).change();$id("notice-datatables-head-row").toggle(!tp.table.head);tp.rows.stripe()},change_table_foot:function(){tp.table.foot=c(this).prop("checked");tp.rows.stripe()},change_print_name_description:function(){$id(this.id+"-position").prop("disabled",!c(this).prop("checked"))},change_datatables:function(){var a=$id("option-use-datatables"),b=!(a.prop("checked")&&!a.prop("disabled"));a.closest("tbody").find("input").not(a).prop("disabled",b);tp.table.change_datatables_pagination()},
change_datatables_pagination:function(){var a=$id("option-datatables-paginate"),a=a.prop("checked")&&!a.prop("disabled");$id("option-datatables-lengthchange").prop("disabled",!a);$id("option-datatables-paginate_entries").prop("disabled",!a)},prepare_ajax_request:function(a,b){var d=$id("edit-form-body"),e=[],f,h={rows:tp.table.rows,columns:tp.table.columns,hidden_rows:0,hidden_columns:0},g={rows:[],columns:[]};d.children().each(function(a,b){e[a]=c(b).find("textarea").map(function(){return c(this).val()}).get()});
e=JSON.stringify(e);f={table_head:tp.table.head,table_foot:tp.table.foot,alternating_row_colors:$id("option-alternating-row-colors").prop("checked"),row_hover:$id("option-row-hover").prop("checked"),print_name:$id("option-print-name").prop("checked"),print_description:$id("option-print-description").prop("checked"),print_name_position:$id("option-print-name-position").val(),print_description_position:$id("option-print-description-position").val(),extra_css_classes:$id("option-extra-css-classes").val(),
use_datatables:$id("option-use-datatables").prop("checked"),datatables_sort:$id("option-datatables-sort").prop("checked"),datatables_filter:$id("option-datatables-filter").prop("checked"),datatables_paginate:$id("option-datatables-paginate").prop("checked"),datatables_lengthchange:$id("option-datatables-lengthchange").prop("checked"),datatables_paginate_entries:$id("option-datatables-paginate_entries").val(),datatables_info:$id("option-datatables-info").prop("checked"),datatables_scrollx:$id("option-datatables-scrollx").prop("checked"),
datatables_custom_commands:$id("option-datatables-custom-commands").val()};f=JSON.stringify(f);g.rows=d.find('input[type="hidden"]').map(function(){if("1"==c(this).val())return 1;h.hidden_rows+=1;return 0}).get();g.columns=$id("edit-form-foot").find('input[type="hidden"]').map(function(){if("1"==c(this).val())return 1;h.hidden_columns+=1;return 0}).get();g=JSON.stringify(g);return{action:a,_ajax_nonce:c(b).val(),tablepress:{id:tp.table.id,new_id:tp.table.new_id,name:$id("table-name").val(),description:$id("table-description").val(),
number:h,data:e,options:f,visibility:g}}},preview:{trigger:function(){if(!tp.made_changes)return tp.table.preview.show(c(this).attr("href")+"&TB_iframe=true"),!1;if($id("option-datatables-paginate").prop("checked")&&!/^[1-9][0-9]{0,4}$/.test($id("option-datatables-paginate_entries").val()))alert(tablepress_strings.num_pagination_entries_invalid),$id("option-datatables-paginate_entries").focus().select();else if(/[^A-Za-z0-9- _]/.test($id("option-extra-css-classes").val()))alert(tablepress_strings.extra_css_classes_invalid),
$id("option-extra-css-classes").focus().select();else return c(this).closest("p").append('<span class="animation-preview spinner" title="'+tablepress_strings.preparing_preview+'"/>'),c("body").addClass("wait"),$id("table-preview").empty(),c.post(ajaxurl,tp.table.prepare_ajax_request("tablepress_preview_table","#nonce-preview-table"),function(){},"json").success(tp.table.preview.ajax_success).error(tp.table.preview.ajax_error),!1},ajax_success:function(a,b){"undefined"==typeof b||"success"!=b?tp.table.preview.error("AJAX call successful, but unclear status."):
"undefined"==typeof a||null==a||"-1"==a||"undefined"==typeof a.success||!0!==a.success?tp.table.preview.error("AJAX call successful, but unclear data."):tp.table.preview.success(a)},ajax_error:function(a,b,c){tp.table.preview.error("AJAX call failed: "+b+" - "+c)},success:function(a){$id("table-preview").empty();c('<iframe id="table-preview-iframe" />').load(function(){var b=c(this).contents();b.find("head").append(a.head_html);b.find("body").append(a.body_html)}).appendTo("#table-preview");c(".animation-preview").remove();
c("body").removeClass("wait");tp.table.preview.show("#TB_inline?inlineId=preview-container")},error:function(a){c(".animation-preview").closest("p").after('<div class="preview-error error"><p><strong>'+tablepress_strings.preview_error+": "+a+"</strong></p></div>");c(".animation-preview").remove();c(".preview-error").delay(6E3).fadeOut(2E3,function(){c(this).remove()});c("body").removeClass("wait")},show:function(a){var b=c(window).width()-120,d=c(window).height()-120;c("body.admin-bar").length&&(d-=
28);tb_show(c(".show-preview-button").first().text(),a+"&height="+d+"&width="+b,!1)}}},rows:{create:function(a){var b,d,e,f="";for(b=0;b<a;b++){f+=tp.table.body_cells_pre;for(d=0;d<tp.table.columns;d++)f+=tp.table.body_cell;f+=tp.table.body_cells_post}e=$id("edit-form-foot").find(".column-hidden").map(function(){return c(this).index()}).get();return c(f).each(function(a,b){c(b).children().filter(function(a){return-1!=c.inArray(a,e)}).addClass("column-hidden")})},append:function(){var a=$id("rows-append-number").val();
/^[1-9][0-9]{0,4}$/.test(a)?($id("edit-form-body").append(tp.rows.create(a)),tp.rows.stripe(),tp.reindex()):(alert(tablepress_strings.append_num_rows_invalid),$id("rows-append-number").focus().select())},insert:function(a){a=$id("edit-form-body").find("input:checked").prop("checked",a.shiftKey).closest("tr");0===a.length?alert(tablepress_strings.no_rows_selected):(a.before(tp.rows.create(1)),tp.rows.stripe(),tp.reindex())},duplicate:function(a){a=$id("edit-form-body").find("input:checked").prop("checked",
a.shiftKey).closest("tr");0===a.length?alert(tablepress_strings.no_rows_selected):(a.each(function(a,d){var e=c(d),f=e.find("textarea"),h=e.clone();h.find("textarea").removeAttr("id").each(function(a,b){c(b).val(f.eq(a).val())});e.after(h)}),tp.rows.stripe(),tp.reindex())},hide:function(a){a=$id("edit-form-body").find("input:checked").prop("checked",a.shiftKey).closest("tr");0===a.length?alert(tablepress_strings.no_rows_selected):(a.addClass("row-hidden").find(".visibility").val("0"),tp.rows.stripe(),
tp.table.set_table_changed())},unhide:function(a){a=$id("edit-form-body").find("input:checked").prop("checked",a.shiftKey).closest("tr");0===a.length?alert(tablepress_strings.no_rows_selected):(a.removeClass("row-hidden").find(".visibility").val("1"),tp.rows.stripe(),tp.table.set_table_changed())},remove:function(){var a,b=$id("edit-form-body").find("input:checked").closest("tr");0===b.length?alert(tablepress_strings.no_rows_selected):tp.table.rows==b.length?alert(tablepress_strings.no_remove_all_rows):
(a=1==b.length?tablepress_strings.ays_remove_rows_singular:tablepress_strings.ays_remove_rows_plural,confirm(a)&&(b.remove(),tp.rows.stripe(),tp.reindex()))},move:{start:function(a,b){c(b.placeholder).removeClass("row-hidden").css("visibility","visible").html('<td colspan="'+(tp.table.columns+tp.table.no_data_columns_pre+tp.table.no_data_columns_post)+'"><div/></td>');c(b.helper).removeClass("odd head-row foot-row")},change:function(a,b){tp.rows.stripe(b.helper)},stop:function(){tp.rows.stripe()}},
sort:function(){var a=c(this).parent().index(),b=c(this).hasClass("sort-asc")?1:-1,d=c("#edit-form-body"),e=d.find(".head-row").prevAll().addBack(),f=d.find(".foot-row").nextAll().addBack(),h=d.children().not(e).not(f).get(),g=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,f=/^0x[0-9a-f]+$/i,h=/^0/,g=a.replace(d,"")||"",k=b.replace(d,
"")||"",d=g.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=k.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),g=parseInt(g.match(f))||1!=d.length&&g.match(e)&&Date.parse(g);if(e=parseInt(k.match(f))||g&&k.match(e)&&Date.parse(k)||null){if(g<e)return-1;if(g>e)return 1}g=0;for(k=Math.max(d.length,c.length);g<k;g++){e=!(d[g]||"").match(h)&&parseFloat(d[g])||d[g]||0;f=!(c[g]||"").match(h)&&parseFloat(c[g])||c[g]||0;if(isNaN(e)!==isNaN(f))return isNaN(e)?
1:-1;typeof e!==typeof f&&(e+="",f+="");if(e<f)return-1;if(e>f)return 1}return 0};c.each(h,function(b,d){d.sort_key=(""+c(d).children().eq(a).find("textarea").val()).toLowerCase()});h.sort(function(a,c){return b*g(a.sort_key,c.sort_key)});c.each(h,function(a,c){c.sort_key=null});d.append(e);d.append(h);d.append(f);tp.rows.stripe();tp.reindex()},stripe:function(a){"undefined"==typeof a&&(a=null);a=c(a);var b=$id("edit-form-body").children().removeClass("odd head-row foot-row").not(a);b.filter(":even").addClass("odd");
b=b.not(".row-hidden");a.hasClass("row-hidden")&&(b=b.not(".ui-sortable-placeholder"));tp.table.head&&b.first().addClass("head-row");tp.table.foot&&b.last().addClass("foot-row")}},columns:{append:function(){var a,b=$id("columns-append-number").val(),d="",e="",f="";if(/^[1-9][0-9]{0,4}$/.test(b)){for(a=0;a<b;a++)e+=tp.table.body_cell,d+=tp.table.head_cell,f+=tp.table.foot_cell;$id("edit-form-body").children().each(function(a,b){c(b).children().slice(-tp.table.no_data_columns_post).before(e)});$id("edit-form-head").children().slice(-tp.table.no_data_columns_post).before(d);
$id("edit-form-foot").children().slice(-tp.table.no_data_columns_post).before(f);tp.reindex()}else alert(tablepress_strings.append_num_columns_invalid),$id("columns-append-number").focus().select()},insert:function(a){var b;a=$id("edit-form-foot").find("input:checked").prop("checked",a.shiftKey).closest("th");0===a.length?alert(tablepress_strings.no_columns_selected):(b=a.map(function(){return c(this).index()}).get(),$id("edit-form-body").children().each(function(a,e){c(e).children().filter(function(a){return-1!=
c.inArray(a,b)}).before(tp.table.body_cell)}),$id("edit-form-head").children().filter(function(a){return-1!=c.inArray(a,b)}).before(tp.table.head_cell),a.before(tp.table.foot_cell),tp.reindex())},duplicate:function(a){var b;a=$id("edit-form-foot").find("input:checked").prop("checked",a.shiftKey).closest("th");0===a.length?alert(tablepress_strings.no_columns_selected):(b=a.map(function(){return c(this).index()}).get(),$id("edit-form").find("tr").each(function(a,e){c(e).children().each(function(a,d){if(-1!=
c.inArray(a,b)){var e=c(d),l=e.clone();l.find("textarea").removeAttr("id").val(e.find("textarea").val());e.after(l)}})}),tp.reindex())},hide:function(a){var b;a=$id("edit-form-foot").find("input:checked").prop("checked",a.shiftKey).closest("th");0===a.length?alert(tablepress_strings.no_columns_selected):(b=a.map(function(){return c(this).index()}).get(),$id("edit-form-body").children().add("#edit-form-head").each(function(a,e){c(e).children().filter(function(a){return-1!=c.inArray(a,b)}).addClass("column-hidden")}),
a.addClass("column-hidden").find(".visibility").val("0"),tp.table.set_table_changed())},unhide:function(a){var b;a=$id("edit-form-foot").find("input:checked").prop("checked",a.shiftKey).closest("th");0===a.length?alert(tablepress_strings.no_columns_selected):(b=a.map(function(){return c(this).index()}).get(),$id("edit-form-body").children().add("#edit-form-head").each(function(a,e){c(e).children().filter(function(a){return-1!=c.inArray(a,b)}).removeClass("column-hidden")}),a.removeClass("column-hidden").find(".visibility").val("1"),
tp.table.set_table_changed())},remove:function(){var a,b,d=$id("edit-form-foot").find("input:checked").closest("th");0===d.length?alert(tablepress_strings.no_columns_selected):tp.table.columns==d.length?alert(tablepress_strings.no_remove_all_columns):(b=1==d.length?tablepress_strings.ays_remove_columns_singular:tablepress_strings.ays_remove_columns_plural,confirm(b)&&(a=d.map(function(){return c(this).index()}).get(),$id("edit-form-body").children().add("#edit-form-head").each(function(b,d){c(d).children().filter(function(b){return-1!=
c.inArray(b,a)}).remove()}),d.remove(),tp.reindex()))},move:{source_idx:-1,target_idx:-1,$rows:null,$row_children:null,$cell:null,$cells:null,$placeholder:null,$helper:null,start:function(a,b){var d=c(b.item);tp.columns.move.source_idx=d.index();tp.columns.move.$rows=$id("edit-form-body").children().add("#edit-form-foot");tp.columns.move.$cells=tp.columns.move.$rows.find(":nth-child("+(tp.columns.move.source_idx+1)+")").each(function(){tp.columns.move.$cell=c(this);c('<td class="move-placeholder"><div/></td>').insertBefore(tp.columns.move.$cell);
tp.columns.move.$cell.insertAfter(tp.columns.move.$cell.nextAll().last()).clone().addClass("move-hover").insertAfter(tp.columns.move.$cell).find("textarea").val(tp.columns.move.$cell.find("textarea").val())}).hide();tp.columns.move.$helper=tp.columns.move.$rows.find(".move-hover");d=tp.columns.move.$helper.eq(1).width();tp.columns.move.$helper.eq(0).width(d);tp.columns.move.$placeholder=tp.columns.move.$rows.find(".move-placeholder");tp.columns.move.$placeholder.find("div").width(d)},change:function(a,
b){tp.columns.move.target_idx=c(b.placeholder).index();1==tp.columns.move.target_idx-tp.columns.move.source_idx?tp.columns.move.target_idx+=1:tp.columns.move.target_idx==tp.columns.move.source_idx&&(tp.columns.move.target_idx-=1);tp.columns.move.$placeholder.each(function(){tp.columns.move.$cell=c(this);tp.columns.move.$cell.insertBefore(tp.columns.move.$cell.parent().children().eq(tp.columns.move.target_idx))});tp.columns.move.target_idx>tp.columns.move.source_idx&&(tp.columns.move.target_idx-=1);
tp.columns.move.source_idx=tp.columns.move.target_idx},sort:function(a,b){tp.columns.move.$helper.css("left",b.position.left)},stop:function(){tp.columns.move.$helper.remove();tp.columns.move.$cells.each(function(){tp.columns.move.$cell=c(this);tp.columns.move.$cell.insertBefore(tp.columns.move.$cell.parent().find(".move-placeholder"))}).show();tp.columns.move.$placeholder.remove();tp.columns.move.source_idx=tp.columns.move.target_idx=-1;tp.columns.move.$rows=tp.columns.move.$row_children=tp.columns.move.$cell=
tp.columns.move.$cells=tp.columns.move.$placeholder=tp.columns.move.$helper=null;tp.reindex()}},number_to_letter:function(a){for(var b="";0<a;)b=String.fromCharCode(65+(a-1)%26)+b,a=Math.floor((a-1)/26);return b}},cells:{$focus:c(null),$textarea:null,autogrow:function(){tp.cells.$focus.removeClass("focus");tp.cells.$focus=c(this).closest("tr").addClass("focus")},advanced_editor:{prompt_shown:!1,keyopen:function(a){a.shiftKey&&(a=$id("advanced-editor-content"),tp.cells.advanced_editor.thickbox_size(),
tp.cells.$textarea=c(this).blur(),a.val(tp.cells.$textarea.val()),$id("advanced-editor").wpdialog("open"),a.get(0).selectionStart=a.get(0).selectionEnd=a.val().length,a.focus())},buttonopen:function(){if(tp.cells.advanced_editor.prompt_shown||confirm(tablepress_strings.advanced_editor_open))tp.cells.advanced_editor.prompt_shown=!0,$id("edit-form-body").one("click","textarea",function(){var a=$id("advanced-editor-content");tp.cells.advanced_editor.thickbox_size();tp.cells.$textarea=c(this).blur();
a.val(tp.cells.$textarea.val());$id("advanced-editor").wpdialog("open");a.get(0).selectionStart=a.get(0).selectionEnd=a.val().length;a.focus()})},save:function(){var a=$id("advanced-editor-content").blur().val();tp.cells.$textarea.val()!=a&&(tp.cells.$textarea.val(a),tp.cells.$textarea.get(0).selectionStart=tp.cells.$textarea.get(0).selectionEnd=tp.cells.$textarea.val().length,tp.table.set_table_changed());tp.cells.$textarea.focus();tp.cells.advanced_editor.close()},close:function(){$id("advanced-editor").wpdialog("close");
return!1},thickbox_size:function(){var a=$id("advanced-editor-content-add_media"),b;b=c(window).width();var d=720<b?720:b,e=c(window).height();a.length&&(b=a.attr("href"),c("body.admin-bar").length&&(e-=28),b=b.replace(/&width=[0-9]+/g,"").replace(/&height=[0-9]+/g,""),a.attr("href",b+("&width="+(d-80)+"&height="+(e-85))))}},checkboxes:{last_clicked:{"#edit-form-body":!1,"#edit-form-foot":!1},multi_select:function(a){if("undefined"==a.shiftKey)return!0;if(a.shiftKey){if(!tp.cells.checkboxes.last_clicked[a.data.parent])return!0;
var b=c(a.data.parent).find(":checkbox"),d=b.index(tp.cells.checkboxes.last_clicked[a.data.parent]),e=b.index(this);d!=e&&b.slice(Math.min(d,e),Math.max(d,e)).prop("checked",c(this).prop("checked"))}tp.cells.checkboxes.last_clicked[a.data.parent]=this;return!0}}},content:{link:{prompt_shown:!1,add:function(){if(tp.content.link.prompt_shown||confirm(tablepress_strings.link_add))tp.content.link.prompt_shown=!0,$id("edit-form-body").one("mousedown","textarea",function(){wpActiveEditor=this.id;c(document).one("mouseup",
function(){wpLink.open();tp.table.set_table_changed()})})}},image:{prompt_shown:!1,add:function(){if(!tp.content.image.prompt_shown&&!confirm(tablepress_strings.image_add))return!1;tp.content.image.prompt_shown=!0;$id("edit-form-body").one("click","textarea",function(){wpActiveEditor=this.id;this.selectionStart=this.selectionEnd=this.value.length;var a=$id("image-add"),b=c(window).width(),b=720<b?720:b,d=c(window).height();c("body.admin-bar").length&&(d-=28);tb_show(a.text(),a.attr("href")+"&TB_iframe=true&height="+
(d-85)+"&width="+(b-80),!1);c(this).blur()});return!1}},span:{prompt_shown:!1,add:function(a){var b="#rowspan#"==a?tablepress_strings.rowspan_add:tablepress_strings.colspan_add;!1===tp.content.span.prompt_shown&&(tp.content.span.prompt_shown={},tp.content.span.prompt_shown["#rowspan#"]=tp.content.span.prompt_shown["#colspan#"]=!1);if($id("option-use-datatables").prop("checked"))if(confirm(tablepress_strings.span_add_datatables_warning))$id("option-use-datatables").prop("checked",!1).change();else return;
if(tp.content.span.prompt_shown[a]||confirm(b))tp.content.span.prompt_shown[a]=!0,$id("edit-form-body").one("click","textarea",function(){var b=c(this),e=b.parent().index(),f=b.closest("tr").index();if("#rowspan#"==a){if(0===f){alert(tablepress_strings.no_rowspan_first_row);return}if(tp.table.head&&1==f){alert(tablepress_strings.no_rowspan_table_head);return}if(tp.table.foot&&tp.table.rows-1==f){alert(tablepress_strings.no_rowspan_table_foot);return}}else if("#colspan#"==a&&tp.table.no_data_columns_pre==
e){alert(tablepress_strings.no_colspan_first_col);return}b.val(a);tp.table.set_table_changed()})}}},check:{table_id:function(a){37!=a.which&&39!=a.which&&(a=c(this),a.val(a.val().replace(/[^0-9a-zA-Z-_]/g,"")))},changes_saved:function(){if(tp.made_changes)return tablepress_strings.unsaved_changes_unload}},reindex:function(){var a,b=$id("edit-form-body").children(),d,e={};tp.table.rows=b.length;tp.table.columns=0<tp.table.rows?b.first().children().length-tp.table.no_data_columns_pre-tp.table.no_data_columns_post:
0;b.each(function(b,h){a=c(h);a.find("textarea").val(function(a,b){return""===b||"="!=b.charAt(0)?b:b.replace(/([A-Z]+[0-9]+)(?::([A-Z]+[0-9]+))?/g,function(a,b,c){e.hasOwnProperty(b)||(d=$id("cell-"+b),e[b]=d.length?tp.columns.number_to_letter(d.parent().index()-tp.table.no_data_columns_pre+1)+(d.closest("tr").index()+1):b);a=e[b];"undefined"!=typeof c&&""!==c&&(e.hasOwnProperty(c)||(d=$id("cell-"+c),e[c]=d.length?tp.columns.number_to_letter(d.parent().index()-tp.table.no_data_columns_pre+1)+(d.closest("tr").index()+
1):c),a+=":"+e[c]);return a})}).attr("name",function(a){return"table[data]["+b+"]["+a+"]"});a.find(".move-handle").html(b+1)}).each(function(a,b){c(b).find("textarea").attr("id",function(b){return"cell-"+tp.columns.number_to_letter(b+1)+(a+1)})});$id("edit-form-head").find(".move-handle").html(function(a){return tp.columns.number_to_letter(a+1)});$id("number-rows").val(tp.table.rows);$id("number-columns").val(tp.table.columns);tp.table.set_table_changed()},save_changes:{trigger:function(a){$id("option-datatables-paginate").prop("checked")&&
!/^[1-9][0-9]{0,4}$/.test($id("option-datatables-paginate_entries").val())?(alert(tablepress_strings.num_pagination_entries_invalid),$id("option-datatables-paginate_entries").focus().select()):/[^A-Za-z0-9- _]/.test($id("option-extra-css-classes").val())?(alert(tablepress_strings.extra_css_classes_invalid),$id("option-extra-css-classes").focus().select()):a.shiftKey?(tp.made_changes=!1,$id("tablepress-page").find("form").submit()):(c(this).closest("p").append('<span class="animation-saving spinner" title="'+
tablepress_strings.saving_changes+'"/>'),c(".save-changes-button").prop("disabled",!0),c("body").addClass("wait"),c.post(ajaxurl,tp.table.prepare_ajax_request("tablepress_save_table","#nonce-edit-table"),function(){},"json").success(tp.save_changes.ajax_success).error(tp.save_changes.ajax_error))},ajax_success:function(a,b){"undefined"==typeof b||"success"!=b?tp.save_changes.error("AJAX call successful, but unclear status. Try again while holding down the &#8220;Shift&#8221; key."):"undefined"==typeof a||
null==a||"-1"==a||"undefined"==typeof a.success||!0!==a.success?tp.save_changes.error("AJAX call successful, but unclear data. Try again while holding down the &#8220;Shift&#8221; key."):tp.save_changes.success(a)},ajax_error:function(a,b,c){tp.save_changes.error("AJAX call failed: "+b+" - "+c+". Try again while holding down the &#8220;Shift&#8221; key.")},success:function(a){tp.table.id!=a.table_id&&"pushState"in window.history&&null!==window.history.pushState&&window.history.pushState("","",window.location.href.replace(/table_id=[0-9a-zA-Z-_]+/gi,
"table_id="+a.table_id));$id("edit-form").removeClass("tablepress-edit-screen-id-"+tp.table.id).addClass("tablepress-edit-screen-id-"+a.table_id);tp.table.id=tp.table.new_id=a.table_id;$id("table-id").val(tp.table.id);$id("table-new-id").val(tp.table.new_id);c(".table-shortcode").val("["+tablepress_options.shortcode+" id="+tp.table.new_id+" /]");$id("nonce-edit-table").val(a.new_edit_nonce);$id("nonce-preview-table").val(a.new_preview_nonce);var b=c(".show-preview-button");b.length&&b.attr("href",
b.first().attr("href").replace(/item=[a-zA-Z0-9_-]+/g,"item="+a.table_id).replace(/&_wpnonce=[a-z0-9]+/ig,"&_wpnonce="+a.new_preview_nonce));$id("last-modified").text(a.last_modified);$id("last-editor").text(a.last_editor);tp.table.unset_table_changed();tp.save_changes.after_saving_dialog("success",tablepress_strings[a.message])},error:function(a){tp.save_changes.after_saving_dialog("error",a)},after_saving_dialog:function(a,b){b="undefined"==typeof b?"":": "+b;var d,e="save-changes-"+a;"success"==
a?(e+=" updated",d=3E3):(e+=" error",d=6E3);c(".animation-saving").closest("p").after('<div class="'+e+'"><p><strong>'+tablepress_strings["save_changes_"+a]+b+"</strong></p></div>");c(".animation-saving").remove();c(".save-changes-"+a).delay(d).fadeOut(2E3,function(){c(this).remove()});c(".save-changes-button").prop("disabled",!1);c("body").removeClass("wait")}},init:function(){var a={click:{"#rows-insert":tp.rows.insert,"#columns-insert":tp.columns.insert,"#rows-duplicate":tp.rows.duplicate,"#columns-duplicate":tp.columns.duplicate,
"#rows-remove":tp.rows.remove,"#columns-remove":tp.columns.remove,"#rows-hide":tp.rows.hide,"#columns-hide":tp.columns.hide,"#rows-unhide":tp.rows.unhide,"#columns-unhide":tp.columns.unhide,"#rows-append":tp.rows.append,"#columns-append":tp.columns.append,"#link-add":tp.content.link.add,"#image-add":tp.content.image.add,"#span-add-rowspan":function(){tp.content.span.add("#rowspan#")},"#span-add-colspan":function(){tp.content.span.add("#colspan#")},".show-preview-button":tp.table.preview.trigger,".save-changes-button":tp.save_changes.trigger,
".show-help-box":function(){c(this).next().wpdialog({title:c(this).attr("title"),height:400,width:300,modal:!0,dialogClass:"wp-dialog",resizable:!1})}},keyup:{"#table-new-id":tp.check.table_id},change:{"#option-table-head":tp.table.change_table_head,"#option-table-foot":tp.table.change_table_foot,"#option-use-datatables":tp.table.change_datatables,"#option-datatables-paginate":tp.table.change_datatables_pagination},blur:{"#table-new-id":tp.table.change_id}},b=$id("edit-form-body");c.each(a,function(a,
b){c.each(b,function(b,e){c(b).on(a,e)})});c(window).on("beforeunload",tp.check.changes_saved);$id("option-table-head").change();$id("option-print-name").change(tp.table.change_print_name_description).change();$id("option-print-description").change(tp.table.change_print_name_description).change();b.one("change","textarea",tp.table.set_table_changed);c("#tablepress_edit-table-information, #tablepress_edit-table-options, #tablepress_edit-datatables-features").one("change","input, textarea, select",
tp.table.set_table_changed);tablepress_options.cells_advanced_editor?(b.on("click","textarea",tp.cells.advanced_editor.keyopen),$id("advanced-editor-open").on("click",tp.cells.advanced_editor.buttonopen),$id("advanced-editor-confirm").on("click",tp.cells.advanced_editor.save),$id("advanced-editor-cancel").on("click",tp.cells.advanced_editor.close),$id("advanced-editor").wpdialog({autoOpen:!1,title:$id("advanced-editor-open").val(),width:600,modal:!0,dialogClass:"wp-dialog",resizable:!1})):$id("advanced-editor-open").hide();
if(tablepress_options.cells_auto_grow)b.on("focus","textarea",tp.cells.autogrow);$id("edit-form-body").on("click","input:checkbox",{parent:"#edit-form-body"},tp.cells.checkboxes.multi_select);$id("edit-form-foot").on("click","input:checkbox",{parent:"#edit-form-foot"},tp.cells.checkboxes.multi_select);$id("edit-form-head").on("click",".sort-control",tp.rows.sort);$id("tablepress-page").find("form").on("submit",function(){c(this).find(".tablepress-postbox-table").find("input, select").prop("disabled",
!1)});b.sortable({axis:"y",containment:$id("edit-form"),forceHelperSize:!0,handle:".move-handle",start:tp.rows.move.start,change:tp.rows.move.change,stop:tp.rows.move.stop,update:tp.reindex});$id("edit-form-head").sortable({axis:"x",items:".head",containment:"parent",forceHelperSize:!0,helper:"clone",handle:".move-handle",start:tp.columns.move.start,stop:tp.columns.move.stop,change:tp.columns.move.change,sort:tp.columns.move.sort}).disableSelection()}};tp.init();window.send_to_editor=function(a){"undefined"!=
typeof QTags?QTags.insertContent(a):document.getElementById(wpActiveEditor).value+=a;try{tb_remove()}catch(b){}tp.table.set_table_changed()}});