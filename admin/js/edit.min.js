jQuery(document).ready(function(a){var b,c;b=function(b){return a(document.getElementById(b))},c=window.tp={made_changes:!1,table:{id:b("table-id").val(),new_id:b("table-new-id").val(),rows:parseInt(b("number-rows").val(),10),columns:parseInt(b("number-columns").val(),10),head:b("option-table-head").prop("checked"),foot:b("option-table-foot").prop("checked"),no_data_columns_pre:2,no_data_columns_post:1,body_cells_pre:'<tr><td><span class="move-handle"></span></td><td><input type="checkbox" /><input type="hidden" class="visibility" name="table[visibility][rows][]" value="1" /></td>',body_cells_post:'<td><span class="move-handle"></span></td></tr>',body_cell:'<td><textarea rows="1"></textarea></td>',head_cell:'<th class="head"><span class="sort-control sort-desc" title="'+tablepress_strings.sort_desc+'"><span class="sorting-indicator"></span></span><span class="sort-control sort-asc" title="'+tablepress_strings.sort_asc+'"><span class="sorting-indicator"></span></span><span class="move-handle"></span></th>',foot_cell:'<th><input type="checkbox" /><input type="hidden" class="visibility" name="table[visibility][columns][]" value="1" /></th>',set_table_changed:function(){c.made_changes=!0},unset_table_changed:function(){c.made_changes=!1,b("edit-form-body").one("change","textarea",c.table.set_table_changed),a("#tablepress_edit-table-information, #tablepress_edit-table-options, #tablepress_edit-datatables-features").one("change","input, textarea, select",c.table.set_table_changed)},change_id:function(){return""===a.trim(b("table-new-id").val())?(alert(tablepress_strings.table_id_not_empty),b("table-new-id").val(c.table.new_id).focus().select(),void 0):"0"===a.trim(b("table-new-id").val())?(alert(tablepress_strings.table_id_not_zero),b("table-new-id").val(c.table.new_id).focus().select(),void 0):(this.value!==c.table.new_id&&(confirm(tablepress_strings.ays_change_table_id)?(c.table.new_id=this.value,a(".table-shortcode").val("["+tablepress_options.shortcode+" id="+c.table.new_id+" /]").click(),c.table.set_table_changed()):a(this).val(c.table.new_id)),void 0)},change_table_head:function(){c.table.head=a(this).prop("checked"),b("option-use-datatables").prop("disabled",!c.table.head).change(),b("notice-datatables-head-row").toggle(!c.table.head),c.rows.stripe()},change_table_foot:function(){c.table.foot=a(this).prop("checked"),c.rows.stripe()},change_print_name_description:function(){b(this.id+"-position").prop("disabled",!a(this).prop("checked"))},change_datatables:function(){var a=b("option-use-datatables"),d=!(a.prop("checked")&&!a.prop("disabled"));a.closest("tbody").find("input").not(a).prop("disabled",d),c.table.change_datatables_pagination()},change_datatables_pagination:function(){var a=b("option-datatables-paginate"),c=a.prop("checked")&&!a.prop("disabled");b("option-datatables-lengthchange").prop("disabled",!c),b("option-datatables-paginate_entries").prop("disabled",!c)},prepare_ajax_request:function(d,e){var f,g=b("edit-form-body"),h=[],i={rows:c.table.rows,columns:c.table.columns,hidden_rows:0,hidden_columns:0},j={rows:[],columns:[]};return g.children().each(function(b,c){h[b]=a(c).find("textarea").map(function(){return a(this).val()}).get()}),h=JSON.stringify(h),f={table_head:c.table.head,table_foot:c.table.foot,alternating_row_colors:b("option-alternating-row-colors").prop("checked"),row_hover:b("option-row-hover").prop("checked"),print_name:b("option-print-name").prop("checked"),print_description:b("option-print-description").prop("checked"),print_name_position:b("option-print-name-position").val(),print_description_position:b("option-print-description-position").val(),extra_css_classes:b("option-extra-css-classes").val(),use_datatables:b("option-use-datatables").prop("checked"),datatables_sort:b("option-datatables-sort").prop("checked"),datatables_filter:b("option-datatables-filter").prop("checked"),datatables_paginate:b("option-datatables-paginate").prop("checked"),datatables_lengthchange:b("option-datatables-lengthchange").prop("checked"),datatables_paginate_entries:b("option-datatables-paginate_entries").val(),datatables_info:b("option-datatables-info").prop("checked"),datatables_scrollx:b("option-datatables-scrollx").prop("checked"),datatables_custom_commands:b("option-datatables-custom-commands").val()},f=JSON.stringify(f),j.rows=g.find('input[type="hidden"]').map(function(){return"1"===a(this).val()?1:(i.hidden_rows+=1,0)}).get(),j.columns=b("edit-form-foot").find('input[type="hidden"]').map(function(){return"1"===a(this).val()?1:(i.hidden_columns+=1,0)}).get(),j=JSON.stringify(j),{action:d,_ajax_nonce:a(e).val(),tablepress:{id:c.table.id,new_id:c.table.new_id,name:b("table-name").val(),description:b("table-description").val(),number:i,data:h,options:f,visibility:j}}},preview:{trigger:function(){return c.made_changes?b("option-datatables-paginate").prop("checked")&&!/^[1-9][0-9]{0,4}$/.test(b("option-datatables-paginate_entries").val())?(alert(tablepress_strings.num_pagination_entries_invalid),b("option-datatables-paginate_entries").focus().select(),void 0):/[^A-Za-z0-9- _]/.test(b("option-extra-css-classes").val())?(alert(tablepress_strings.extra_css_classes_invalid),b("option-extra-css-classes").focus().select(),void 0):(a(this).closest("p").append('<span class="animation-preview spinner" title="'+tablepress_strings.preparing_preview+'"/>'),a("body").addClass("wait"),b("table-preview").empty(),a.post(ajaxurl,c.table.prepare_ajax_request("tablepress_preview_table","#nonce-preview-table"),function(){},"json").success(c.table.preview.ajax_success).error(c.table.preview.ajax_error),!1):(c.table.preview.show(a(this).attr("href")+"&TB_iframe=true"),!1)},ajax_success:function(a,b){"undefined"==typeof b||"success"!==b?c.table.preview.error("AJAX call successful, but unclear status."):"undefined"==typeof a||null===a||"-1"===a||"undefined"==typeof a.success||!0!==a.success?c.table.preview.error("AJAX call successful, but unclear data."):c.table.preview.success(a)},ajax_error:function(a,b,d){c.table.preview.error("AJAX call failed: "+b+" - "+d)},success:function(d){b("table-preview").empty(),a('<iframe id="table-preview-iframe" />').load(function(){var b=a(this).contents();b.find("head").append(d.head_html),b.find("body").append(d.body_html)}).appendTo("#table-preview"),a(".animation-preview").remove(),a("body").removeClass("wait"),c.table.preview.show("#TB_inline?inlineId=preview-container")},error:function(b){a(".animation-preview").closest("p").after('<div class="preview-error error"><p><strong>'+tablepress_strings.preview_error+": "+b+"</strong></p></div>"),a(".animation-preview").remove(),a(".preview-error").delay(6e3).fadeOut(2e3,function(){a(this).remove()}),a("body").removeClass("wait")},show:function(b){var c=a(window).width()-120,d=a(window).height()-120;a("body.admin-bar").length&&(d-=28),tb_show(a(".show-preview-button").first().text(),b+"&height="+d+"&width="+c,!1)}}},rows:{create:function(d){var e,f,g,h="";for(e=0;d>e;e++){for(h+=c.table.body_cells_pre,f=0;f<c.table.columns;f++)h+=c.table.body_cell;h+=c.table.body_cells_post}return g=b("edit-form-foot").find(".column-hidden").map(function(){return a(this).index()}).get(),a(h).each(function(b,c){a(c).children().filter(function(b){return-1!==a.inArray(b,g)}).addClass("column-hidden")})},append:function(){var a=b("rows-append-number").val();return/^[1-9][0-9]{0,4}$/.test(a)?(b("edit-form-body").append(c.rows.create(a)),c.rows.stripe(),c.reindex(),void 0):(alert(tablepress_strings.append_num_rows_invalid),b("rows-append-number").focus().select(),void 0)},insert:function(a){var d=b("edit-form-body").find("input:checked").prop("checked",a.shiftKey).closest("tr");return 0===d.length?(alert(tablepress_strings.no_rows_selected),void 0):(d.before(c.rows.create(1)),c.rows.stripe(),c.reindex(),void 0)},duplicate:function(d){var e=b("edit-form-body").find("input:checked").prop("checked",d.shiftKey).closest("tr");return 0===e.length?(alert(tablepress_strings.no_rows_selected),void 0):(e.each(function(b,c){var d=a(c),e=d.find("textarea"),f=d.clone();f.find("textarea").removeAttr("id").each(function(b,c){a(c).val(e.eq(b).val())}),d.after(f)}),c.rows.stripe(),c.reindex(),void 0)},hide:function(a){var d=b("edit-form-body").find("input:checked").prop("checked",a.shiftKey).closest("tr");return 0===d.length?(alert(tablepress_strings.no_rows_selected),void 0):(d.addClass("row-hidden").find(".visibility").val("0"),c.rows.stripe(),c.table.set_table_changed(),void 0)},unhide:function(a){var d=b("edit-form-body").find("input:checked").prop("checked",a.shiftKey).closest("tr");return 0===d.length?(alert(tablepress_strings.no_rows_selected),void 0):(d.removeClass("row-hidden").find(".visibility").val("1"),c.rows.stripe(),c.table.set_table_changed(),void 0)},remove:function(){var a,d=b("edit-form-body").find("input:checked").closest("tr");return 0===d.length?(alert(tablepress_strings.no_rows_selected),void 0):c.table.rows===d.length?(alert(tablepress_strings.no_remove_all_rows),void 0):(a=1===d.length?tablepress_strings.ays_remove_rows_singular:tablepress_strings.ays_remove_rows_plural,confirm(a)&&(d.remove(),c.rows.stripe(),c.reindex()),void 0)},move:{start:function(b,d){a(d.placeholder).removeClass("row-hidden").css("visibility","visible").html('<td colspan="'+(c.table.columns+c.table.no_data_columns_pre+c.table.no_data_columns_post)+'"><div/></td>'),a(d.helper).removeClass("odd head-row foot-row")},change:function(a,b){c.rows.stripe(b.helper)},stop:function(){c.rows.stripe()}},sort:function(){var b=a(this).parent().index(),d=a(this).hasClass("sort-asc")?1:-1,e=a("#edit-form-body"),f=e.find(".head-row").prevAll().addBack(),g=e.find(".foot-row").nextAll().addBack(),h=e.children().not(f).not(g).get(),i=function(a,b){var c,d,e,f,g=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,h=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,j=/^0x[0-9a-f]+$/i,k=/^0/,l=a.replace(h,"")||"",m=b.replace(h,"")||"",n=l.replace(g,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),o=m.replace(g,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),p=parseInt(l.match(j),10)||1!==n.length&&l.match(i)&&Date.parse(l),q=parseInt(m.match(j),10)||p&&m.match(i)&&Date.parse(m)||null;if(q){if(q>p)return-1;if(p>q)return 1}for(e=0,f=Math.max(n.length,o.length);f>e;e++){if(c=!(n[e]||"").match(k)&&parseFloat(n[e])||n[e]||0,d=!(o[e]||"").match(k)&&parseFloat(o[e])||o[e]||0,isNaN(c)!==isNaN(d))return isNaN(c)?1:-1;if(typeof c!=typeof d&&(c+="",d+=""),d>c)return-1;if(c>d)return 1}return 0};a.each(h,function(c,d){d.sort_key=(""+a(d).children().eq(b).find("textarea").val()).toLowerCase()}),h.sort(function(a,b){return d*i(a.sort_key,b.sort_key)}),a.each(h,function(a,b){b.sort_key=null}),e.append(f),e.append(h),e.append(g),c.rows.stripe(),c.reindex()},stripe:function(d){"undefined"==typeof d&&(d=null),d=a(d);var e=b("edit-form-body").children().removeClass("odd head-row foot-row").not(d);e.filter(":even").addClass("odd"),e=e.not(".row-hidden"),d.hasClass("row-hidden")&&(e=e.not(".ui-sortable-placeholder")),c.table.head&&e.first().addClass("head-row"),c.table.foot&&e.last().addClass("foot-row")}},columns:{append:function(){var d,e=b("columns-append-number").val(),f="",g="",h="";if(!/^[1-9][0-9]{0,4}$/.test(e))return alert(tablepress_strings.append_num_columns_invalid),b("columns-append-number").focus().select(),void 0;for(d=0;e>d;d++)g+=c.table.body_cell,f+=c.table.head_cell,h+=c.table.foot_cell;b("edit-form-body").children().each(function(b,d){a(d).children().slice(-c.table.no_data_columns_post).before(g)}),b("edit-form-head").children().slice(-c.table.no_data_columns_post).before(f),b("edit-form-foot").children().slice(-c.table.no_data_columns_post).before(h),c.reindex()},insert:function(d){var e,f=b("edit-form-foot").find("input:checked").prop("checked",d.shiftKey).closest("th");return 0===f.length?(alert(tablepress_strings.no_columns_selected),void 0):(e=f.map(function(){return a(this).index()}).get(),b("edit-form-body").children().each(function(b,d){a(d).children().filter(function(b){return-1!==a.inArray(b,e)}).before(c.table.body_cell)}),b("edit-form-head").children().filter(function(b){return-1!==a.inArray(b,e)}).before(c.table.head_cell),f.before(c.table.foot_cell),c.reindex(),void 0)},duplicate:function(d){var e,f=b("edit-form-foot").find("input:checked").prop("checked",d.shiftKey).closest("th");return 0===f.length?(alert(tablepress_strings.no_columns_selected),void 0):(e=f.map(function(){return a(this).index()}).get(),b("edit-form").find("tr").each(function(b,c){a(c).children().each(function(b,c){if(-1!==a.inArray(b,e)){var d=a(c),f=d.clone();f.find("textarea").removeAttr("id").val(d.find("textarea").val()),d.after(f)}})}),c.reindex(),void 0)},hide:function(d){var e,f=b("edit-form-foot").find("input:checked").prop("checked",d.shiftKey).closest("th");return 0===f.length?(alert(tablepress_strings.no_columns_selected),void 0):(e=f.map(function(){return a(this).index()}).get(),b("edit-form-body").children().add("#edit-form-head").each(function(b,c){a(c).children().filter(function(b){return-1!==a.inArray(b,e)}).addClass("column-hidden")}),f.addClass("column-hidden").find(".visibility").val("0"),c.table.set_table_changed(),void 0)},unhide:function(d){var e,f=b("edit-form-foot").find("input:checked").prop("checked",d.shiftKey).closest("th");return 0===f.length?(alert(tablepress_strings.no_columns_selected),void 0):(e=f.map(function(){return a(this).index()}).get(),b("edit-form-body").children().add("#edit-form-head").each(function(b,c){a(c).children().filter(function(b){return-1!==a.inArray(b,e)}).removeClass("column-hidden")}),f.removeClass("column-hidden").find(".visibility").val("1"),c.table.set_table_changed(),void 0)},remove:function(){var d,e,f=b("edit-form-foot").find("input:checked").closest("th");return 0===f.length?(alert(tablepress_strings.no_columns_selected),void 0):c.table.columns===f.length?(alert(tablepress_strings.no_remove_all_columns),void 0):(e=1===f.length?tablepress_strings.ays_remove_columns_singular:tablepress_strings.ays_remove_columns_plural,confirm(e)&&(d=f.map(function(){return a(this).index()}).get(),b("edit-form-body").children().add("#edit-form-head").each(function(b,c){a(c).children().filter(function(b){return-1!==a.inArray(b,d)}).remove()}),f.remove(),c.reindex()),void 0)},move:{source_idx:-1,target_idx:-1,$rows:null,$row_children:null,$cell:null,$cells:null,$placeholder:null,$helper:null,start:function(d,e){var f,g=a(e.item);c.columns.move.source_idx=g.index(),c.columns.move.$rows=b("edit-form-body").children().add("#edit-form-foot"),c.columns.move.$cells=c.columns.move.$rows.find(":nth-child("+(c.columns.move.source_idx+1)+")").each(function(){c.columns.move.$cell=a(this),a('<td class="move-placeholder"><div/></td>').insertBefore(c.columns.move.$cell),c.columns.move.$cell.insertAfter(c.columns.move.$cell.nextAll().last()).clone().addClass("move-hover").insertAfter(c.columns.move.$cell).find("textarea").val(c.columns.move.$cell.find("textarea").val())}).hide(),c.columns.move.$helper=c.columns.move.$rows.find(".move-hover"),f=c.columns.move.$helper.eq(1).width(),c.columns.move.$helper.eq(0).width(f),c.columns.move.$placeholder=c.columns.move.$rows.find(".move-placeholder"),c.columns.move.$placeholder.find("div").width(f)},change:function(b,d){c.columns.move.target_idx=a(d.placeholder).index(),c.columns.move.target_idx-c.columns.move.source_idx===1?c.columns.move.target_idx+=1:c.columns.move.target_idx===c.columns.move.source_idx&&(c.columns.move.target_idx-=1),c.columns.move.$placeholder.each(function(){c.columns.move.$cell=a(this),c.columns.move.$cell.insertBefore(c.columns.move.$cell.parent().children().eq(c.columns.move.target_idx))}),c.columns.move.target_idx>c.columns.move.source_idx&&(c.columns.move.target_idx-=1),c.columns.move.source_idx=c.columns.move.target_idx},sort:function(a,b){c.columns.move.$helper.css("left",b.position.left)},stop:function(){c.columns.move.$helper.remove(),c.columns.move.$cells.each(function(){c.columns.move.$cell=a(this),c.columns.move.$cell.insertBefore(c.columns.move.$cell.parent().find(".move-placeholder"))}).show(),c.columns.move.$placeholder.remove(),c.columns.move.source_idx=c.columns.move.target_idx=-1,c.columns.move.$rows=c.columns.move.$row_children=c.columns.move.$cell=c.columns.move.$cells=c.columns.move.$placeholder=c.columns.move.$helper=null,c.reindex()}},number_to_letter:function(a){for(var b="";a>0;)b=String.fromCharCode(65+(a-1)%26)+b,a=Math.floor((a-1)/26);return b}},cells:{$focus:a(null),$textarea:null,autogrow:function(){c.cells.$focus.removeClass("focus"),c.cells.$focus=a(this).closest("tr").addClass("focus")},advanced_editor:{prompt_shown:!1,keyopen:function(d){if(d.shiftKey){var e=b("advanced-editor-content");c.cells.$textarea=a(this).blur(),e.val(c.cells.$textarea.val()),b("advanced-editor").wpdialog("open"),e.get(0).selectionStart=e.get(0).selectionEnd=e.val().length,e.focus()}},buttonopen:function(){(c.cells.advanced_editor.prompt_shown||confirm(tablepress_strings.advanced_editor_open))&&(c.cells.advanced_editor.prompt_shown=!0,b("edit-form-body").one("click","textarea",function(){var d=b("advanced-editor-content");c.cells.$textarea=a(this).blur(),d.val(c.cells.$textarea.val()),b("advanced-editor").wpdialog("open"),d.get(0).selectionStart=d.get(0).selectionEnd=d.val().length,d.focus()}))},save:function(){var a=b("advanced-editor-content").blur().val();c.cells.$textarea.val()!==a&&(c.cells.$textarea.val(a),c.cells.$textarea.get(0).selectionStart=c.cells.$textarea.get(0).selectionEnd=c.cells.$textarea.val().length,c.table.set_table_changed()),c.cells.$textarea.focus(),c.cells.advanced_editor.close()},close:function(){return b("advanced-editor").wpdialog("close"),!1}},checkboxes:{last_clicked:{"#edit-form-body":!1,"#edit-form-foot":!1},multi_select:function(b){if("undefined"===b.shiftKey)return!0;if(b.shiftKey){if(!c.cells.checkboxes.last_clicked[b.data.parent])return!0;var d=a(b.data.parent).find(":checkbox"),e=d.index(c.cells.checkboxes.last_clicked[b.data.parent]),f=d.index(this);e!==f&&d.slice(Math.min(e,f),Math.max(e,f)).prop("checked",a(this).prop("checked"))}return c.cells.checkboxes.last_clicked[b.data.parent]=this,!0}}},content:{link:{prompt_shown:!1,add:function(){(c.content.link.prompt_shown||confirm(tablepress_strings.link_add))&&(c.content.link.prompt_shown=!0,b("edit-form-body").one("mousedown","textarea",function(){wpActiveEditor=this.id,a(document).one("mouseup",function(){wpLink.open(),c.table.set_table_changed()})}))}},image:{prompt_shown:!1,add:function(){return c.content.image.prompt_shown||confirm(tablepress_strings.image_add)?(c.content.image.prompt_shown=!0,b("edit-form-body").one("click","textarea",function(){wpActiveEditor=this.id,this.selectionStart=this.selectionEnd=this.value.length;var c=b("image-add"),d=a(window).width(),e=d>720?720:d,f=a(window).height();a("body.admin-bar").length&&(f-=28),tb_show(c.text(),c.attr("href")+"&TB_iframe=true&height="+(f-85)+"&width="+(e-80),!1),a(this).blur()}),!1):!1}},span:{prompt_shown:!1,add:function(d){var e="#rowspan#"===d?tablepress_strings.rowspan_add:tablepress_strings.colspan_add;if(!1===c.content.span.prompt_shown&&(c.content.span.prompt_shown={},c.content.span.prompt_shown["#rowspan#"]=c.content.span.prompt_shown["#colspan#"]=!1),b("option-use-datatables").prop("checked")){if(!confirm(tablepress_strings.span_add_datatables_warning))return;b("option-use-datatables").prop("checked",!1).change()}(c.content.span.prompt_shown[d]||confirm(e))&&(c.content.span.prompt_shown[d]=!0,b("edit-form-body").one("click","textarea",function(){var b=a(this),e=b.parent().index(),f=b.closest("tr").index();if("#rowspan#"===d){if(0===f)return alert(tablepress_strings.no_rowspan_first_row),void 0;if(c.table.head&&1===f)return alert(tablepress_strings.no_rowspan_table_head),void 0;if(c.table.foot&&c.table.rows-1===f)return alert(tablepress_strings.no_rowspan_table_foot),void 0}else if("#colspan#"===d&&c.table.no_data_columns_pre===e)return alert(tablepress_strings.no_colspan_first_col),void 0;b.val(d),c.table.set_table_changed()}))}}},check:{table_id:function(b){if(37!==b.which&&39!==b.which){var c=a(this);c.val(c.val().replace(/[^0-9a-zA-Z-_]/g,""))}},changes_saved:function(){return c.made_changes?tablepress_strings.unsaved_changes_unload:void 0}},reindex:function(){var d,e,f=b("edit-form-body").children(),g={};c.table.rows=f.length,c.table.columns=c.table.rows>0?f.first().children().length-c.table.no_data_columns_pre-c.table.no_data_columns_post:0,f.each(function(f,h){d=a(h),d.find("textarea").val(function(a,d){return""===d||"="!==d.charAt(0)?d:d.replace(/([A-Z]+[0-9]+)(?::([A-Z]+[0-9]+))?/g,function(a,d,f){return g.hasOwnProperty(d)||(e=b("cell-"+d),g[d]=e.length?c.columns.number_to_letter(e.parent().index()-c.table.no_data_columns_pre+1)+(e.closest("tr").index()+1):d),a=g[d],"undefined"!=typeof f&&""!==f&&(g.hasOwnProperty(f)||(e=b("cell-"+f),g[f]=e.length?c.columns.number_to_letter(e.parent().index()-c.table.no_data_columns_pre+1)+(e.closest("tr").index()+1):f),a+=":"+g[f]),a})}).attr("name",function(a){return"table[data]["+f+"]["+a+"]"}),d.find(".move-handle").html(f+1)}).each(function(b,d){a(d).find("textarea").attr("id",function(a){return"cell-"+c.columns.number_to_letter(a+1)+(b+1)})}),b("edit-form-head").find(".move-handle").html(function(a){return c.columns.number_to_letter(a+1)}),b("number-rows").val(c.table.rows),b("number-columns").val(c.table.columns),c.table.set_table_changed()},save_changes:{trigger:function(d){return b("option-datatables-paginate").prop("checked")&&!/^[1-9][0-9]{0,4}$/.test(b("option-datatables-paginate_entries").val())?(alert(tablepress_strings.num_pagination_entries_invalid),b("option-datatables-paginate_entries").focus().select(),void 0):/[^A-Za-z0-9- _]/.test(b("option-extra-css-classes").val())?(alert(tablepress_strings.extra_css_classes_invalid),b("option-extra-css-classes").focus().select(),void 0):d.shiftKey?(c.made_changes=!1,b("tablepress-page").find("form").submit(),void 0):(a(this).closest("p").append('<span class="animation-saving spinner" title="'+tablepress_strings.saving_changes+'"/>'),a(".save-changes-button").prop("disabled",!0),a("body").addClass("wait"),a.post(ajaxurl,c.table.prepare_ajax_request("tablepress_save_table","#nonce-edit-table"),function(){},"json").success(c.save_changes.ajax_success).error(c.save_changes.ajax_error),void 0)},ajax_success:function(a,b){"undefined"==typeof b||"success"!==b?c.save_changes.error("AJAX call successful, but unclear status. Try again while holding down the &#8220;Shift&#8221; key."):"undefined"==typeof a||null===a||"-1"===a||"undefined"==typeof a.success||!0!==a.success?c.save_changes.error("AJAX call successful, but unclear data. Try again while holding down the &#8220;Shift&#8221; key."):c.save_changes.success(a)},ajax_error:function(a,b,d){c.save_changes.error("AJAX call failed: "+b+" - "+d+". Try again while holding down the &#8220;Shift&#8221; key.")},success:function(d){c.table.id!==d.table_id&&"pushState"in window.history&&null!==window.history.pushState&&window.history.pushState("","",window.location.href.replace(/table_id=[0-9a-zA-Z-_]+/gi,"table_id="+d.table_id)),b("edit-form").removeClass("tablepress-edit-screen-id-"+c.table.id).addClass("tablepress-edit-screen-id-"+d.table_id),c.table.id=c.table.new_id=d.table_id,b("table-id").val(c.table.id),b("table-new-id").val(c.table.new_id),a(".table-shortcode").val("["+tablepress_options.shortcode+" id="+c.table.new_id+" /]"),b("nonce-edit-table").val(d.new_edit_nonce),b("nonce-preview-table").val(d.new_preview_nonce);var e=a(".show-preview-button");e.length&&e.attr("href",e.first().attr("href").replace(/item=[a-zA-Z0-9_-]+/g,"item="+d.table_id).replace(/&_wpnonce=[a-z0-9]+/gi,"&_wpnonce="+d.new_preview_nonce)),b("last-modified").text(d.last_modified),b("last-editor").text(d.last_editor),c.table.unset_table_changed(),c.save_changes.after_saving_dialog("success",tablepress_strings[d.message])},error:function(a){c.save_changes.after_saving_dialog("error",a)},after_saving_dialog:function(b,c){c="undefined"==typeof c?"":": "+c;var d,e="save-changes-"+b;"success"===b?(e+=" updated",d=3e3):(e+=" error",d=6e3),a(".animation-saving").closest("p").after('<div class="'+e+'"><p><strong>'+tablepress_strings["save_changes_"+b]+c+"</strong></p></div>"),a(".animation-saving").remove(),a(".save-changes-"+b).delay(d).fadeOut(2e3,function(){a(this).remove()}),a(".save-changes-button").prop("disabled",!1),a("body").removeClass("wait")}},init:function(){var d={click:{"#rows-insert":c.rows.insert,"#columns-insert":c.columns.insert,"#rows-duplicate":c.rows.duplicate,"#columns-duplicate":c.columns.duplicate,"#rows-remove":c.rows.remove,"#columns-remove":c.columns.remove,"#rows-hide":c.rows.hide,"#columns-hide":c.columns.hide,"#rows-unhide":c.rows.unhide,"#columns-unhide":c.columns.unhide,"#rows-append":c.rows.append,"#columns-append":c.columns.append,"#link-add":c.content.link.add,"#image-add":c.content.image.add,"#span-add-rowspan":function(){c.content.span.add("#rowspan#")},"#span-add-colspan":function(){c.content.span.add("#colspan#")},".show-preview-button":c.table.preview.trigger,".save-changes-button":c.save_changes.trigger,".show-help-box":function(){a(this).next().wpdialog({title:a(this).attr("title"),height:420,width:320,modal:!0,dialogClass:"wp-dialog",resizable:!1})}},keyup:{"#table-new-id":c.check.table_id},change:{"#option-table-head":c.table.change_table_head,"#option-table-foot":c.table.change_table_foot,"#option-use-datatables":c.table.change_datatables,"#option-datatables-paginate":c.table.change_datatables_pagination},blur:{"#table-new-id":c.table.change_id}},e=b("edit-form-body");a.each(d,function(b,c){a.each(c,function(c,d){a(c).on(b,d)})}),a(window).on("beforeunload",c.check.changes_saved),b("option-table-head").change(),b("option-print-name").change(c.table.change_print_name_description).change(),b("option-print-description").change(c.table.change_print_name_description).change(),e.one("change","textarea",c.table.set_table_changed),a("#tablepress_edit-table-information, #tablepress_edit-table-options, #tablepress_edit-datatables-features").one("change","input, textarea, select",c.table.set_table_changed),tablepress_options.cells_advanced_editor?(e.on("click","textarea",c.cells.advanced_editor.keyopen),b("advanced-editor-open").on("click",c.cells.advanced_editor.buttonopen),b("advanced-editor-confirm").on("click",c.cells.advanced_editor.save),b("advanced-editor-cancel").on("click",c.cells.advanced_editor.close),b("advanced-editor").wpdialog({autoOpen:!1,title:b("advanced-editor-open").val(),width:600,modal:!0,dialogClass:"wp-dialog",resizable:!1})):b("advanced-editor-open").hide(),tablepress_options.cells_auto_grow&&e.on("focus","textarea",c.cells.autogrow),b("edit-form-body").on("click","input:checkbox",{parent:"#edit-form-body"},c.cells.checkboxes.multi_select),b("edit-form-foot").on("click","input:checkbox",{parent:"#edit-form-foot"},c.cells.checkboxes.multi_select),b("edit-form-head").on("click",".sort-control",c.rows.sort),b("tablepress-page").find("form").on("submit",function(){a(this).find(".tablepress-postbox-table").find("input, select").prop("disabled",!1)}),e.sortable({axis:"y",containment:b("edit-form"),forceHelperSize:!0,handle:".move-handle",start:c.rows.move.start,change:c.rows.move.change,stop:c.rows.move.stop,update:c.reindex}),b("edit-form-head").sortable({axis:"x",items:".head",containment:"parent",forceHelperSize:!0,helper:"clone",handle:".move-handle",start:c.columns.move.start,stop:c.columns.move.stop,change:c.columns.move.change,sort:c.columns.move.sort}).disableSelection()}},c.init(),window.send_to_editor=function(a){"undefined"!=typeof QTags?QTags.insertContent(a):document.getElementById(wpActiveEditor).value+=a;try{tb_remove()}catch(b){}c.table.set_table_changed()}});